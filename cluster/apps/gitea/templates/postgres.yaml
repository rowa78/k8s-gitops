apiVersion: "acid.zalan.do/v1"
kind: postgresql
metadata:
  name: rwcloud-gitea-db
spec:
  teamId: "rwcloud"
  numberOfInstances: 2
  databases:
    eve: gitea_owner  # dbname: owner  
  preparedDatabases:
    gitea:
      defaultUsers: true
      extensions:
        hypopg: public
  postgresql:
    version: "14"    
    parameters:
      max_connections: "500"
      full_page_writes: "off"
      logbias: "latency"
      pg_stat_statements.track: all
  resources:
    limits:
      cpu: 2000m
      memory: 4000Mi
    requests:
      cpu: 500m
      memory: 500Mi
  volume:
    size: 100Gi
    storageClass: openebs-zfs-pg
