sql_driver = pgsql

pgsql localhost {
  parameters {
    user = admin
    # You can also set up non-password authentication by modifying PostgreSQL's
    # pg_hba.conf
    password = pass
    dbname = mails
  }
}

passdb sql {
  query = SELECT userid AS username, domain, password \
    FROM users \
    WHERE userid = '%{user | username}' AND domain = '%{user | domain}'
}
userdb sql {
  query = SELECT home, uid, gid \
    FROM users \
    WHERE userid = '%{user | username}' AND domain = '%{user | domain}'
  # For using doveadm -A:
  iterate_query = SELECT userid AS username, domain FROM users
}