traefik:  
  deployment:
    # -- Enable deployment
    enabled: true
    # -- Deployment or DaemonSet
    kind: DaemonSet

  hostNetwork: false

  updateStrategy:  # @schema additionalProperties: false
    # -- Customize updateStrategy of Deployment or DaemonSet
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1  # @schema type:[integer, string, null]
      maxSurge:         # @schema type:[integer, string, null]

  service:
    enabled: true
    type: NodePort
    # -- Additional annotations applied to both TCP and UDP services (e.g. for cloud provider specific config)
    # annotations: 
    #   kube-vip.io/loadbalancerIPs: "192.168.1.100,fd00:2222:0:0::100"
    ipFamilies:
      - IPv4
      - IPv6
    ipFamilyPolicy: PreferDualStack

  
  ports:
    traefik:
      port: 8080
      nodePort: 30080
      # -- Use hostPort if set.
      # hostPort:  
    web:
      port: 8000
      nodePort: 30000
    websecure:
      port: 8443
      nodePort: 30443
      # hostPort: 443
      proxyProtocol:
        trustedIPs:
          - 192.168.0.0/24
          - fd00:2222::/64
    metrics:
      port: 9101
      nodePort: 30101

  ingressRoute:
    dashboard:
      enabled: false
      entryPoints: [web, websecure]
      matchRule: Host(`traefik-dashboard.rwcloud.org`)

  logs:
    general:
      # -- Set [logs format](https://doc.traefik.io/traefik/observability/logs/#format)
      format:  # @schema enum:["common", "json", null]; type:[string, null]; default: "common"
      # By default, the level is set to INFO.
      # -- Alternative logging levels are TRACE, DEBUG, INFO, WARN, ERROR, FATAL, and PANIC.
      level: "INFO"  # @schema enum:[TRACE,DEBUG,INFO,WARN,ERROR,FATAL,PANIC]; default: "INFO"
      
    access:
      # -- To enable access logs
      enabled: true
      # -- Set [access log format](https://doc.traefik.io/traefik/observability/access-logs/#format)
      format:  # @schema enum:["common", "genericCLF", "json", null]; type:[string, null]; default: "common"
      # filePath: "/var/log/traefik/access.log

  experimental:
    plugins: 
      geoblock:
        moduleName: "github.com/PascalMinder/geoblock"
        version: "v0.3.3"
  
  additionalArguments:
  - "--entrypoints.websecure.http.middlewares=traefik-geblock@kubernetescrd"
  - "--providers.kubernetescrd.allowCrossNamespace=true"

  providers:
    kubernetesIngress:
      # -- Load Kubernetes Ingress provider
      enabled: true
      # -- Allows to reference ExternalName services in Ingress
      allowExternalNameServices: false
      # -- Allows to return 503 when there are no endpoints available
      allowEmptyServices: true
      # -- Only for Traefik v3.0, Deprecated since v3.1. See [upstream documentation](https://doc.traefik.io/traefik/v3.0/providers/kubernetes-ingress/#disableingressclasslookup)
      disableIngressClassLookup: false
      # -- When ingressClass is set, only Ingresses containing an annotation with the same value are processed. Otherwise, Ingresses missing the annotation, having an empty value, or the value traefik are processed.
      ingressClass:  # @schema type:[string, null]
      labelSelector:  # @schema type:[string, null]
      # -- Array of namespaces to watch. If left empty, Traefik watches all namespaces. . When using `rbac.namespaced`, it will watch helm release namespace and namespaces listed in this array.
      namespaces: []
      # IP used for Kubernetes Ingress endpoints
      publishedService:
        # -- Enable [publishedService](https://doc.traefik.io/traefik/providers/kubernetes-ingress/#publishedservice),
        # usually with the Service provided by this Chart. It's possible to use it with an external Service using pathOverride.
        enabled: true
        # -- Override path of Kubernetes Service used to copy status from. Format: namespace/servicename.
        # Default to Service deployed with this Chart.
        pathOverride: "traefik/traefik"
      # -- Defines whether to use Native Kubernetes load-balancing mode by default.
      nativeLBByDefault: false
      # -- Defines whether to make prefix matching strictly comply with the Kubernetes Ingress specification.
      strictPrefixMatching: false
 