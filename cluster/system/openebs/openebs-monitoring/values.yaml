openebs-monitoring:
  # Default values for openebs-monitoring.
  # This is a YAML-formatted file.
  # Declare variables to be passed into your templates.

  ## Provide a name in place of openebs-monitoring for `app:` labels
  ##
  nameOverride: ""

  ## Override the deployment namespace
  ##
  namespaceOverride: ""

  ## Provide a name to substitute for the full names of resources
  ##
  fullnameOverride: ""

  ## Configuration for kube-prometheus-stack subchart
  kube-prometheus-stack:
    install: false

  ## Configuration for installing openebs-monitoring addons
  openebsMonitoringAddon:
    cStor:
      enabled: false
      
    jiva:
      enabled: true
      dashboards:
        enabled: true
      alertRules:
        enabled: true
      serviceMonitor:
        enabled: true

        ## Endpoints of the selected service to be monitored
        endpoints:
          ## Name of the endpoint's service port
          ## Mutually exclusive with targetPort
          #  port: ""
          port: exporter

          ## HTTP path to scrape for metrics
          #  path: /metrics
          path: /metrics

          ## relabel configs to apply to samples before ingestion.
          ##
          #  relabelings: []
          #    - sourceLabels: [__meta_kubernetes_service_name]
          #      separator: ;
          #      regex: (.*)
          #      targetLabel: service
          #      replacement: $1
          #      action: replace
          relabelings:
            ## RelabelConfigs to apply to samples before scraping.
            ## More info: https://prometheus.io/docs/prometheus/latest/configuration/configuration/#relabel_config
            ## To know more about RelabelConfig schema visit: https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#relabelconfig
            ## Below entry ending with vsm is deprecated and is maintained for
            ## backward compatibility purpose.
            - sourceLabels: [__meta_kubernetes_pod_label_vsm]
              action: replace
              targetLabel: openebs_pv
            ## Below entry is the correct entry. Though the above and below entries
            ## are having same target_label as openebs_pv, only one of them will be
            ## valid for any release.
            - sourceLabels:
                [__meta_kubernetes_pod_label_openebs_io_persistent_volume]
              action: replace
              targetLabel: openebs_pv
            - sourceLabels:
                [__meta_kubernetes_pod_label_openebs_io_persistent_volume_claim]
              action: replace
              targetLabel: openebs_pvc
            - sourceLabels:
                [__meta_kubernetes_endpoints_label_openebs_io_cas_type]
              action: replace
              targetLabel: openebs_cas_type

        ## Label selector for services to which this ServiceMonitor applies
        # selector: {}
        #   matchLabels: {}

        ## Example

        # selector:
        #   matchLabels:
        #     cas-type: jiva

        selector:
          matchLabels:
            openebs.io/cas-type: jiva

        ## Namespaces from which services are selected
        # namespaceSelector: []
        ## Match any namespace
        #   any: true

        ## Example

        # namespaceSelector:
        #   any: true

        ## Explicit list of namespace names to select
        #   matchNames: []

        ## Example

        # namespaceSelector:
        #   matchNames:
        #   - openebs
        #   - default

        namespaceSelector:
          any: true

    lvmLocalPV:
      enabled: true
      dashboards:
        enabled: true
      alertRules:
        enabled: true
      serviceMonitor:
        enabled: true

        ## Endpoints of the selected service to be monitored
        endpoints:
          ## Name of the endpoint's service port
          ## Mutually exclusive with targetPort
          #  port: ""
          port: metrics

          ## HTTP path to scrape for metrics
          #  path: /metrics
          path: /metrics

        ## Label selector for services to which this ServiceMonitor applies
        # selector: {}
        #   matchLabels: {}

        ## Example

        # selector:
        #   matchLabels:
        #     name: openebs-lvm-node

        selector:
          matchLabels:
            name: openebs-lvm-node

        ## Namespaces from which services are selected
        # namespaceSelector: []
        ## Match any namespace
        #   any: true

        ## Example

        # namespaceSelector:
        #   any: true

        ## Explicit list of namespace names to select
        #   matchNames: []

        ## Example

        # namespaceSelector:
        #   matchNames:
        #   - openebs
        #   - default

        namespaceSelector:
          any: true

    deviceLocalPV:
      enabled: true
      dashboards:
        enabled: true
      alertRules:
        enabled: true
      serviceMonitor:
        enabled: true

        ## Endpoints of the selected service to be monitored
        endpoints:
          ## Name of the endpoint's service port
          ## Mutually exclusive with targetPort
          #  port: ""
          port: metrics

          ## HTTP path to scrape for metrics
          #  path: /metrics
          path: /metrics

        ## Label selector for services to which this ServiceMonitor applies
        # selector: {}
        #   matchLabels: {}

        ## Example

        # selector:
        #   matchLabels:
        #     name: openebs-device-node

        selector:
          matchLabels:
            name: openebs-device-node

        ## Namespaces from which services are selected
        # namespaceSelector: []
        ## Match any namespace
        #   any: true

        ## Example

        # namespaceSelector:
        #   any: true

        ## Explicit list of namespace names to select
        #   matchNames: []

        ## Example

        # namespaceSelector:
        #   matchNames:
        #   - openebs
        #   - default

        namespaceSelector:
          any: true

    ndm:
      enabled: false
      dashboards:
        enabled: true
      alertRules:
        enabled: true
      serviceMonitor:
        enabled: true

        ## Endpoints of the selected service to be monitored
        endpoints:
          ## Name of the endpoint's service port
          ## Mutually exclusive with targetPort
          #  port: ""
          port: metrics

          ## HTTP path to scrape for metrics
          #  path: /metrics
          path: /metrics

        ## Label selector for services to which this ServiceMonitor applies
        # selector: {}
        #   matchLabels: {}

        ## Example

        # selector:
        #   matchLabels:
        #     name: openebs-lvm-node

        selector:
          matchLabels:
            app: openebs-ndm-exporter

        ## Namespaces from which services are selected
        # namespaceSelector: []
        ## Match any namespace
        #   any: true

        ## Example

        # namespaceSelector:
        #   any: true

        ## Explicit list of namespace names to select
        #   matchNames: []

        ## Example

        # namespaceSelector:
        #   matchNames:
        #   - openebs
        #   - default

        namespaceSelector:
          any: true

    npd:
      enabled: true
      dashboards:
        enabled: true
      alertRules:
        enabled: true

    volume:
      enabled: true
      alertRules:
        enabled: true

    localPV:
      enabled: true
      dashboards:
        enabled: true

    zfsLocalPV:
      enabled: true
      dashboards:
        enabled: true

